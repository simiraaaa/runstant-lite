//- layout.jade
doctype html

html
  head
    meta(charset='utf-8')

    meta(name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1")
    meta(name="apple-mobile-web-app-capable" content="yes")
    meta(name="apple-mobile-web-app-status-bar-style" content="black-translucent")
    link(type="image/x-icon", rel="shortcut icon", href="/images/favicon.ico")

    title #{title} | Runstant
    meta(name="description", content="思いたったらすぐ開発, プログラミングに革命を...")
    meta(name="keywords", content="runstant,tool,javascript,html,css")

    //- for facebook
    meta(property='og:title', content='Runstant')
    meta(property='og:type', content='website')
    meta(property='og:description', content='思いたったらすぐ開発. プログラミングに革命を...')
    meta(property='og:url', content='http://runstant.com')
    meta(property='og:image', content='http://runstant.com/images/logo/runstant.png')
    meta(property='og:site_name', content='Runstant')
    meta(property='og:email', content='phi1618jp@gmail.com')

    //- for twitter card
    meta(name="twitter:card", content="summary")
    meta(name="twitter:site", content="@phi_jp")
    meta(name="twitter:creator", content="@phi_jp")
  body
    button.btn
      img.logo(src='/images/logo/runstant-transparent.png')

    style.
      body {
        background-color: rgb(240, 240, 240);
      }
      .btn {
        position: fixed;
        display: block;
        width: 150px;
        height: 150px;
        left: 0px;
        top: 0px;
        right: 0px;
        bottom: 0px;
        margin: auto;
        background-color: hsl(200, 18%, 26%);
        box-shadow: 0px 0px 4px 0px #444, 0px 0px 8px 0px #444;
        cursor: pointer;
        
        border: none;
        outline: none;
        
        font-size: 5rem;
        border-radius: 50%;
        padding: 10px;
      }
      .btn img {
        width: 100%;
      }
      .btn:hover {

      }
      .btn.fill {
        -webkit-transition: 500ms;
           -moz-transition: 500ms;
                transition: 500ms;
        -webkit-transform: scale(10);
           -moz-transform: scale(10);
                transform: scale(10);
        opacity: 0;
      }
      .btn.fill > img {
        -webkit-transition: 100ms;
           -moz-transition: 100ms;
                transition: 100ms;
        opacity: 0;
      }

    script.
      var btn = document.querySelector('.btn');

      var q2o = function(q) {
        var params = {};
        var items = q.split('&');
        items.forEach(function(item) {
          var pair = item.split('=');
          params[pair[0]] = pair[1];
        });

        return params;
      };
      var go = function(link) {
        btn.classList.add('fill');
        document.location.href = link || '/';
      };
      window.onload = function() {
        var query = q2o(document.location.search.substr(1));
        var btn = document.querySelector('.btn');
        btn.onclick = function() {
          go(query.link);
        };

        if (query.wait) {
          setTimeout(function() {
            go(query.link);
          }, +query.wait);
        }
      }

    //- google analytics code
    script.
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-19424304-6', 'auto');
      ga('send', 'pageview');
